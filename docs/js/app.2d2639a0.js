(function(t){function e(e){for(var r,i,c=e[0],s=e[1],u=e[2],p=0,h=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"5c0b":function(t,e,n){"use strict";var r=n("e332"),a=n.n(r);a.a},"6f9b":function(t,e,n){"use strict";var r=n("a278"),a=n.n(r);a.a},a278:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"screen"},[n("p",[t._v("通过 props 手动管理状态")]),n("VueEChartsComponent",{staticClass:"chart",attrs:{option:t.chart1Option,loading:t.chart1Loading},on:{init:t.fetchChart1Data}})],1),n("div",{staticClass:"screen"},[n("p",[t._v("再封装一层：实现状态自动管理")]),n("VECharts",{ref:"chart2",staticClass:"chart",attrs:{"get-option":t.chart2OptionGenerator,theme:"primary"},on:{timelinechanged:t.changeYear,click:t.changeMonth}})],1)])},o=[],i=(n("a481"),n("96cf"),n("3b8d")),c=n("d225"),s=n("b0b4"),u=n("308d"),l=n("6bb5"),p=n("4e2b"),h=n("9ab4"),f=n("60a3"),d=n("0f40"),y=n.n(d),b=(n("66c8"),n("456d"),n("ac6a"),n("c5f6"),n("3eba")),v=n.n(b),g=n("eec4"),O=n.n(g),m=n("b047"),j=n.n(m),w=r["a"].extend({name:"VueEChartsComponent",props:{option:Object,loading:Boolean,group:String,theme:{type:[Object,String],default:function(){return w.defaultTheme}},lazy:{type:[Object,Boolean],default:function(){return w.defaultLazy}},autoResize:{type:[Boolean,Number],default:function(){return w.defaultAutoResize}}},mounted:function(){var t=this,e=this.$el,n=function(){var n=t.instance=v.a.init(e,t.theme);if(t.$on("hook:beforeDestroy",(function(){return n.dispose()})),Object.keys(t.$listeners).forEach((function(e){var r=[];r.concat(t.$listeners[e]).forEach((function(t){n.on(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.apply(this,[n].concat(r))}))}))})),!1!==t.autoResize){var r=function(){n.resize(),t.$emit("auto-resize",n)},a=j()(r,"number"!==typeof t.autoResize?100:t.autoResize),o=O()({strategy:"scroll"});o.listenTo(e,a),t.$on(["hook:beforeDestroy","hook:deactivated"],(function(){return o.removeListener(e,a)})),t.$nextTick((function(){t.$on("hook:activated",(function(){r(),o.listenTo(e,a)}))}))}t.$watch("option",(function(e,r){t.option?n.setOption(Object.isFrozen(t.option)?x(t.option):t.option,e!==r):n.clear()}),{deep:!0,immediate:!!t.option}),t.$watch("group",(function(){n.group=t.group}),{immediate:!!t.group}),t.$watch("loading",(function(){return n[t.loading?"showLoading":"hideLoading"]()}),{immediate:t.loading}),t.$emit("init",n)};if(this.lazy&&"IntersectionObserver"in window){var r=new IntersectionObserver((function(t){(t[0].isIntersecting||t[0].intersectionRatio)&&(r.unobserve(e),n())}),!0===this.lazy?{}:this.lazy);r.observe(e),this.$on("hook:beforeDestroy",(function(){return r.unobserve(e)}))}else n()},render:function(t){return t("div")}});w.defaultTheme=null,w.defaultLazy=!0,w.defaultAutoResize=100;var k=w;function x(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("VueEChartsComponent",t._g(t._b({staticClass:"stretch",attrs:{option:t.currentOption,loading:t.syncedLoading},on:{init:t.init}},"VueEChartsComponent",t.$attrs,!1),t.$listeners)),t.syncedLoading||!t.syncedError&&!t.syncedTip?t._e():n("div",{staticClass:"stretch flexbox"},[t.syncedError?n("span",{staticClass:"error",on:{click:t.retry}},[t._v("加载失败，点击重试")]):t.syncedTip?[t._v("\n      "+t._s(t.syncedTip)+"\n    ")]:t._e()],2)],1)},$=[],T=n("313e"),E=n.n(T);E.a.registerTheme("default",{color:["#3682ea","#5bc42d","#fa9024"]}),E.a.registerTheme("primary",{color:["#ebc71e","#d9ef1c","#22de88"]}),k.defaultTheme="default";var L=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.syncedLoading=t.loading,t.syncedError=t.error,t.syncedTip=t.tip,t.called=!1,t.currentOption=null,t}return Object(p["a"])(e,t),Object(s["a"])(e,[{key:"syncLoading",value:function(){this.syncedLoading=this.loading}},{key:"syncError",value:function(){this.syncedError=this.error}},{key:"syncTip",value:function(){this.syncedTip=this.tip}},{key:"flush",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.called=!0,!this.$echartsInstance||!this.getOption){t.next=22;break}return t.prev=2,this.syncedLoading=!0,this.syncedTip="",t.next=7,this.getOption(this.$echartsInstance,this.currentOption,!this.called);case 7:if(e=t.sent,this.syncedError=!1,e){t.next=12;break}return this.currentOption=null,t.abrupt("return");case 12:this.syncedLoading=!1,"string"===typeof e?(this.syncedTip=e||"没有数据",this.currentOption=null):this.currentOption=e,t.next=22;break;case 16:throw t.prev=16,t.t0=t["catch"](2),this.syncedError=!0,this.currentOption=null,this.syncedLoading=!1,t.t0;case 22:case"end":return t.stop()}}),t,this,[[2,16]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"retry",value:function(){"function"===typeof this.getOption?this.flush():this.$emit("retry")}},{key:"init",value:function(t){var e=this;this.$echartsInstance=t,"function"===typeof this.getOption?!this.called&&this.passive||this.flush():this.$watch("option",(function(){e.currentOption=e.option||null}),{immediate:!0})}},{key:"instance",get:function(){return this.$echartsInstance}}]),e}(f["c"]);Object(h["a"])([Object(f["b"])(Function)],L.prototype,"getOption",void 0),Object(h["a"])([Object(f["b"])(Boolean)],L.prototype,"passive",void 0),Object(h["a"])([Object(f["b"])(Object)],L.prototype,"option",void 0),Object(h["a"])([Object(f["b"])(Boolean)],L.prototype,"loading",void 0),Object(h["a"])([Object(f["b"])(Boolean)],L.prototype,"error",void 0),Object(h["a"])([Object(f["b"])({type:String,default:""})],L.prototype,"tip",void 0),Object(h["a"])([Object(f["d"])("loading")],L.prototype,"syncLoading",null),Object(h["a"])([Object(f["d"])("error")],L.prototype,"syncError",null),Object(h["a"])([Object(f["d"])("tip")],L.prototype,"syncTip",null),L=Object(h["a"])([Object(f["a"])({name:"VECharts",components:{VueEChartsComponent:k},inheritAttrs:!1})],L);var _=L,D=_,z=(n("6f9b"),n("2877")),R=Object(z["a"])(D,C,$,!1,null,"2c3590cc",null),I=R.exports;function P(t){return new Promise((function(e){return setTimeout(e,t)}))}function S(t,e){for(var n="function"===typeof e?e:function(){return e},r=new Array(t),a=0;a<t;a++)r[a]=n(a);return r}function V(t,e){return new Date(t,e,0).getDate()}var A=5,B=new Date,M=B.getMonth()+1,Q=B.getFullYear(),F=Q-A+1,Y=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.chart1Data=[],t.chart1Loading=!1,t.chart2Query={year:Q,month:M},t.chart2Data=[],t}return Object(p["a"])(e,t),Object(s["a"])(e,[{key:"fetchChart1Data",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.chart1Loading=!0,t.next=3,P(500);case 3:this.chart1Data=["第一产业（农业）","第二产业（工业）","第三产业（服务业）"].map((function(t){return{name:t,value:y()(5e3,15e3)}})),this.chart1Loading=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"flushChart2",value:function(){this.$refs.chart2.flush()}},{key:"chart2OptionGenerator",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.chart2Query,n=e.year,r=e.month,a=n-F,o=r-1,this.chart2Data[a]){t.next=7;break}return t.next=6,P(500);case 6:this.chart2Data[a]=S(12,(function(t){var e=y()(5e3,15e3),r=t+1;return n===Q&&r===M&&(e*=B.getDate()/V(n,r)),+e.toFixed()}));case 7:return i=this.chart2Data,t.abrupt("return",{baseOption:{timeline:{axisType:"category",currentIndex:a,data:S(5,(function(t){return"".concat(t+F,"年")})),label:{formatter:function(t){return t.slice(0,-1)}},controlStyle:{showPlayBtn:!1}},tooltip:{},calculable:!0,grid:{top:40,bottom:100,tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0,formatter:function(t){return t.value.replace("\n","")}}}}},xAxis:[{type:"category",splitLine:{show:!1},data:S(12,(function(t){return"".concat(t+1,"月")}))}],yAxis:[{type:"value",name:"件数"}],series:[{name:"打标签数量",type:"bar",label:{show:!0}}]},options:S(5,(function(t){return{series:[{encode:{y:t+1},emphasis:{label:!0},data:i[t],markPoint:t===a?{silent:!0,data:[{coord:[o,i[t][o]]}]}:null}]}}))});case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"changeYear",value:function(t,e){var n=e.currentIndex+F;n!==this.chart2Query.year&&(this.chart2Query={year:e.currentIndex+F,month:1})}},{key:"changeMonth",value:function(t,e){"bar"===e.seriesType&&(this.chart2Query.month=e.dataIndex+1)}},{key:"chart1Option",get:function(){return this.chart1Data?{tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:"pie",radius:[0,"75%"],label:{formatter:"{b}",position:"inner",emphasis:{textStyle:{fontSize:20}}},data:this.chart1Data}]}:null}}]),e}(f["c"]);Object(h["a"])([Object(f["d"])("chart2Query",{deep:!0})],Y.prototype,"flushChart2",null),Y=Object(h["a"])([Object(f["a"])({name:"App",components:{VueEChartsComponent:k,VECharts:I}})],Y);var G=Y,J=G,N=(n("5c0b"),Object(z["a"])(J,a,o,!1,null,null,null)),q=N.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(q)}}).$mount("#app")},e332:function(t,e,n){}});